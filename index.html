<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive revenue model calculator for visualizing 20+ different software pricing strategies">
    <title>Revenue Model Calculator</title>

    <!-- Tailwind CSS via Play CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- ApexCharts for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.0/dist/apexcharts.min.js"></script>

    <style>
        /* Custom styles and overrides will go here */
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .container-custom {
            max-width: 1920px;
            margin: 0 auto;
            padding: 1rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Main Container -->
    <div class="container-custom">
        <!-- Header -->
        <header class="bg-white shadow-sm rounded-lg p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-900">Revenue Model Calculator</h1>
            <p class="text-gray-600 mt-2">Visualize and compare different software revenue models</p>
        </header>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Sidebar: Model Selection & Input Form -->
            <div class="lg:col-span-1">
                <div class="bg-white shadow-sm rounded-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Select Model</h2>

                    <!-- Model Selector -->
                    <div class="mb-6">
                        <label for="modelSelect" class="block text-sm font-medium text-gray-700 mb-2">
                            Revenue Model
                        </label>
                        <select id="modelSelect" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">-- Select a Model --</option>
                            <!-- Options will be dynamically populated -->
                        </select>
                    </div>

                    <!-- Dynamic Input Form -->
                    <div id="inputForm">
                        <p class="text-gray-500 text-sm">Select a model to see input fields</p>
                    </div>

                    <!-- Calculate Button -->
                    <div class="mt-6">
                        <button id="calculateBtn" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                            Calculate
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Content: Charts & Metrics -->
            <div class="lg:col-span-2">
                <!-- Metrics Panel -->
                <div id="metricsPanel" class="bg-white shadow-sm rounded-lg p-6 mb-6 hidden">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Key Metrics</h2>
                    <div id="metricsContent" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <!-- Metrics will be dynamically populated -->
                    </div>
                </div>

                <!-- Primary Chart -->
                <div id="primaryChartContainer" class="bg-white shadow-sm rounded-lg p-6 mb-6 hidden">
                    <div id="primaryChart"></div>
                </div>

                <!-- Secondary Charts -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div id="secondaryChart1Container" class="bg-white shadow-sm rounded-lg p-6 hidden">
                        <div id="secondaryChart1"></div>
                    </div>
                    <div id="secondaryChart2Container" class="bg-white shadow-sm rounded-lg p-6 hidden">
                        <div id="secondaryChart2"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-8 text-center text-gray-500 text-sm">
            <p>Revenue Model Calculator | Open Source | Built with ApexCharts & Tailwind CSS</p>
        </footer>
    </div>

    <script>
        // ========== CONFIGURATION ==========
        const CONFIG = {
            defaultForecastMonths: 24,
            maxForecastMonths: 36,
            debounceDelay: 300,
            chartColors: {
                primary: '#3B82F6',
                positive: '#10B981',
                moderate: '#F59E0B',
                negative: '#EF4444',
                secondary: '#6B7280'
            }
        };

        // ========== MODEL DEFINITIONS ==========
        const models = {
            // Model definitions will be implemented here
            // Each model will have: name, inputs, calculate function, charts configuration
        };

        // ========== UTILITY FUNCTIONS ==========

        /**
         * Format currency value with proper decimals
         */
        function formatCurrency(value) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(value);
        }

        /**
         * Format percentage value
         */
        function formatPercentage(value) {
            return `${value.toFixed(1)}%`;
        }

        /**
         * Format large numbers with thousand separators
         */
        function formatNumber(value) {
            return new Intl.NumberFormat('en-US').format(Math.round(value));
        }

        /**
         * Validate input based on type
         */
        function validateInput(type, value) {
            const numValue = parseFloat(value);

            if (isNaN(numValue)) return false;
            if (numValue < 0) return false;

            if (type === 'percent' && numValue > 100) return false;

            return true;
        }

        /**
         * Debounce function for input handling
         */
        function debounce(func, delay) {
            let timeoutId;
            return function(...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(this, args), delay);
            };
        }

        // ========== FORM GENERATION ==========

        /**
         * Generate dynamic form based on model inputs
         */
        function generateForm(modelInputs) {
            // Form generation logic will be implemented here
            console.log('Generating form for model inputs:', modelInputs);
        }

        // ========== CALCULATION ENGINE ==========

        /**
         * Calculate results for the selected model
         */
        function calculateModel(modelName, inputs, months) {
            // Calculation logic will be implemented here
            console.log('Calculating model:', modelName, inputs, months);
            return [];
        }

        // ========== CHART RENDERING ==========

        /**
         * Render chart using ApexCharts
         */
        function renderChart(containerId, chartConfig, data) {
            // Chart rendering logic will be implemented here
            console.log('Rendering chart in:', containerId, chartConfig, data);
        }

        /**
         * Update metrics panel with calculated values
         */
        function updateMetrics(metrics) {
            // Metrics update logic will be implemented here
            console.log('Updating metrics:', metrics);
        }

        // ========== EVENT HANDLERS ==========

        /**
         * Handle model selection change
         */
        function onModelChange(event) {
            const selectedModel = event.target.value;
            console.log('Model changed to:', selectedModel);

            // Clear previous results
            // Generate new form
            // Enable/disable calculate button
        }

        /**
         * Handle input field changes
         */
        const onInputChange = debounce(function(event) {
            console.log('Input changed:', event.target.name, event.target.value);
            // Auto-calculate on input change
        }, CONFIG.debounceDelay);

        /**
         * Handle calculate button click
         */
        function onCalculate() {
            console.log('Calculate button clicked');
            // Gather inputs
            // Run calculation
            // Update charts and metrics
        }

        // ========== INITIALIZATION ==========

        /**
         * Initialize the application
         */
        function init() {
            console.log('Revenue Model Calculator initialized');

            // Populate model selector
            const modelSelect = document.getElementById('modelSelect');
            // Add event listeners
            modelSelect.addEventListener('change', onModelChange);

            const calculateBtn = document.getElementById('calculateBtn');
            calculateBtn.addEventListener('click', onCalculate);

            // Load any saved state from localStorage (optional)
        }

        // Start the application when DOM is ready
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
